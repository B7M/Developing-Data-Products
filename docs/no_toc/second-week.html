<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Second week | Developing Data Products</title>
  <meta name="description" content="Description about Course/Book." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Second week | Developing Data Products" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Description about Course/Book." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Second week | Developing Data Products" />
  
  <meta name="twitter:description" content="Description about Course/Book." />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="assets/dasl_favicon.ico" type="image/x-icon" />
<link rel="prev" href="first-week.html"/>
<link rel="next" href="third-week.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<link href="shared/ionrangeslider/css/ion.rangeSlider.css" rel="stylesheet" />
<link href="shared/ionrangeslider/css/ion.rangeSlider.skinShiny.css" rel="stylesheet" />
<script src="shared/ionrangeslider/js/ion.rangeSlider.min.js"></script>
<script src="shared/strftime/strftime-min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.4.1/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.4.1/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.4.1/shim/respond.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="http://jhudatascience.org/"><img src="https://jhudatascience.org/images/dasl.png" style=" width: 80%; padding-left: 40px; padding-top: 8px; vertical-align: top "</a>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About this Course</a></li>
<li class="chapter" data-level="1" data-path="first-week.html"><a href="first-week.html"><i class="fa fa-check"></i><b>1</b> First week</a>
<ul>
<li class="chapter" data-level="1.1" data-path="first-week.html"><a href="first-week.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="first-week.html"><a href="first-week.html#welcome-to-developing-data-products"><i class="fa fa-check"></i><b>1.1.1</b> Welcome to Developing Data Products</a></li>
<li class="chapter" data-level="1.1.2" data-path="first-week.html"><a href="first-week.html#syllabus"><i class="fa fa-check"></i><b>1.1.2</b> Syllabus</a></li>
<li class="chapter" data-level="1.1.3" data-path="first-week.html"><a href="first-week.html#some-basics"><i class="fa fa-check"></i><b>1.1.3</b> Some Basics</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="first-week.html"><a href="first-week.html#shiny-part-1"><i class="fa fa-check"></i><b>1.2</b> Shiny Part 1</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="first-week.html"><a href="first-week.html#shiny"><i class="fa fa-check"></i><b>1.2.1</b> Shiny</a></li>
<li class="chapter" data-level="1.2.2" data-path="first-week.html"><a href="first-week.html#shinyapps.io-project"><i class="fa fa-check"></i><b>1.2.2</b> Shinyapps.io Project</a></li>
<li class="chapter" data-level="1.2.3" data-path="first-week.html"><a href="first-week.html#shiny-1.1"><i class="fa fa-check"></i><b>1.2.3</b> Shiny 1.1</a></li>
<li class="chapter" data-level="1.2.4" data-path="first-week.html"><a href="first-week.html#shiny-1.2"><i class="fa fa-check"></i><b>1.2.4</b> Shiny 1.2</a></li>
<li class="chapter" data-level="1.2.5" data-path="first-week.html"><a href="first-week.html#shiny-1.3"><i class="fa fa-check"></i><b>1.2.5</b> Shiny 1.3</a></li>
<li class="chapter" data-level="1.2.6" data-path="first-week.html"><a href="first-week.html#shiny-1.4"><i class="fa fa-check"></i><b>1.2.6</b> Shiny 1.4</a></li>
<li class="chapter" data-level="1.2.7" data-path="first-week.html"><a href="first-week.html#shiny-1.5"><i class="fa fa-check"></i><b>1.2.7</b> Shiny 1.5</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="first-week.html"><a href="first-week.html#shiny-part-2"><i class="fa fa-check"></i><b>1.3</b> Shiny Part 2</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="first-week.html"><a href="first-week.html#shiny-2.1"><i class="fa fa-check"></i><b>1.3.1</b> Shiny 2.1</a></li>
<li class="chapter" data-level="1.3.2" data-path="first-week.html"><a href="first-week.html#shiny-2.2"><i class="fa fa-check"></i><b>1.3.2</b> Shiny 2.2</a></li>
<li class="chapter" data-level="1.3.3" data-path="first-week.html"><a href="first-week.html#shiny-2.3"><i class="fa fa-check"></i><b>1.3.3</b> Shiny 2.3</a></li>
<li class="chapter" data-level="1.3.4" data-path="first-week.html"><a href="first-week.html#shiny-2.4"><i class="fa fa-check"></i><b>1.3.4</b> Shiny 2.4</a></li>
<li class="chapter" data-level="1.3.5" data-path="first-week.html"><a href="first-week.html#shiny-2.5"><i class="fa fa-check"></i><b>1.3.5</b> Shiny 2.5</a></li>
<li class="chapter" data-level="1.3.6" data-path="first-week.html"><a href="first-week.html#shiny-2.6"><i class="fa fa-check"></i><b>1.3.6</b> Shiny 2.6</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="first-week.html"><a href="first-week.html#shiny-part-3"><i class="fa fa-check"></i><b>1.4</b> Shiny Part 3</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="first-week.html"><a href="first-week.html#shinyuieditor"><i class="fa fa-check"></i><b>1.4.1</b> ShinyUiEditor</a></li>
<li class="chapter" data-level="1.4.2" data-path="first-week.html"><a href="first-week.html#layouts"><i class="fa fa-check"></i><b>1.4.2</b> Layouts</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="first-week.html"><a href="first-week.html#shiny-gadgets"><i class="fa fa-check"></i><b>1.5</b> Shiny Gadgets</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="first-week.html"><a href="first-week.html#shiny-gadgets-1.1"><i class="fa fa-check"></i><b>1.5.1</b> Shiny Gadgets 1.1</a></li>
<li class="chapter" data-level="1.5.2" data-path="first-week.html"><a href="first-week.html#shiny-gadgets-1.2"><i class="fa fa-check"></i><b>1.5.2</b> Shiny Gadgets 1.2</a></li>
<li class="chapter" data-level="1.5.3" data-path="first-week.html"><a href="first-week.html#shiny-gadgets-1.3"><i class="fa fa-check"></i><b>1.5.3</b> Shiny Gadgets 1.3</a></li>
<li class="chapter" data-level="1.5.4" data-path="first-week.html"><a href="first-week.html#shiny-gadgets-1.4"><i class="fa fa-check"></i><b>1.5.4</b> Shiny Gadgets 1.4</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="first-week.html"><a href="first-week.html#quiz-1"><i class="fa fa-check"></i><b>1.6</b> Quiz 1</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="second-week.html"><a href="second-week.html"><i class="fa fa-check"></i><b>2</b> Second week</a>
<ul>
<li class="chapter" data-level="2.1" data-path="second-week.html"><a href="second-week.html#quarto"><i class="fa fa-check"></i><b>2.1</b> Quarto</a></li>
<li class="chapter" data-level="2.2" data-path="second-week.html"><a href="second-week.html#publishing-quarto-content"><i class="fa fa-check"></i><b>2.2</b> Publishing Quarto Content</a></li>
<li class="chapter" data-level="2.3" data-path="second-week.html"><a href="second-week.html#r-markdown"><i class="fa fa-check"></i><b>2.3</b> R Markdown</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="second-week.html"><a href="second-week.html#r-markdown-1.1"><i class="fa fa-check"></i><b>2.3.1</b> R Markdown 1.1</a></li>
<li class="chapter" data-level="2.3.2" data-path="second-week.html"><a href="second-week.html#r-markdown-1.2"><i class="fa fa-check"></i><b>2.3.2</b> R Markdown 1.2</a></li>
<li class="chapter" data-level="2.3.3" data-path="second-week.html"><a href="second-week.html#r-markdown-1.3"><i class="fa fa-check"></i><b>2.3.3</b> R Markdown 1.3</a></li>
<li class="chapter" data-level="2.3.4" data-path="second-week.html"><a href="second-week.html#r-markdown-1.4"><i class="fa fa-check"></i><b>2.3.4</b> R Markdown 1.4</a></li>
<li class="chapter" data-level="2.3.5" data-path="second-week.html"><a href="second-week.html#r-markdown-1.5"><i class="fa fa-check"></i><b>2.3.5</b> R Markdown 1.5</a></li>
<li class="chapter" data-level="2.3.6" data-path="second-week.html"><a href="second-week.html#r-markdown-1.6"><i class="fa fa-check"></i><b>2.3.6</b> R Markdown 1.6</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="second-week.html"><a href="second-week.html#a-few-ways-to-share-r-markdown-products"><i class="fa fa-check"></i><b>2.4</b> A few Ways to Share R Markdown Products</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="second-week.html"><a href="second-week.html#plotly-1.1"><i class="fa fa-check"></i><b>2.4.1</b> Plotly 1.1</a></li>
<li class="chapter" data-level="2.4.2" data-path="second-week.html"><a href="second-week.html#plotly-1.2"><i class="fa fa-check"></i><b>2.4.2</b> Plotly 1.2</a></li>
<li class="chapter" data-level="2.4.3" data-path="second-week.html"><a href="second-week.html#plotly-1.3"><i class="fa fa-check"></i><b>2.4.3</b> Plotly 1.3</a></li>
<li class="chapter" data-level="2.4.4" data-path="second-week.html"><a href="second-week.html#plotly-1.4"><i class="fa fa-check"></i><b>2.4.4</b> Plotly 1.4</a></li>
<li class="chapter" data-level="2.4.5" data-path="second-week.html"><a href="second-week.html#plotly-1.5"><i class="fa fa-check"></i><b>2.4.5</b> Plotly 1.5</a></li>
<li class="chapter" data-level="2.4.6" data-path="second-week.html"><a href="second-week.html#plotly-1.6"><i class="fa fa-check"></i><b>2.4.6</b> Plotly 1.6</a></li>
<li class="chapter" data-level="2.4.7" data-path="second-week.html"><a href="second-week.html#plotly-1.7"><i class="fa fa-check"></i><b>2.4.7</b> Plotly 1.7</a></li>
<li class="chapter" data-level="2.4.8" data-path="second-week.html"><a href="second-week.html#plotly-1.8"><i class="fa fa-check"></i><b>2.4.8</b> Plotly 1.8</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="second-week.html"><a href="second-week.html#leaflet"><i class="fa fa-check"></i><b>2.5</b> Leaflet</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="second-week.html"><a href="second-week.html#leaflet-1.1"><i class="fa fa-check"></i><b>2.5.1</b> Leaflet 1.1</a></li>
<li class="chapter" data-level="2.5.2" data-path="second-week.html"><a href="second-week.html#leaflet-1.2"><i class="fa fa-check"></i><b>2.5.2</b> Leaflet 1.2</a></li>
<li class="chapter" data-level="2.5.3" data-path="second-week.html"><a href="second-week.html#leaflet-1.3"><i class="fa fa-check"></i><b>2.5.3</b> Leaflet 1.3</a></li>
<li class="chapter" data-level="2.5.4" data-path="second-week.html"><a href="second-week.html#leaflet-1.4"><i class="fa fa-check"></i><b>2.5.4</b> Leaflet 1.4</a></li>
<li class="chapter" data-level="2.5.5" data-path="second-week.html"><a href="second-week.html#leaflet-1.5"><i class="fa fa-check"></i><b>2.5.5</b> Leaflet 1.5</a></li>
<li class="chapter" data-level="2.5.6" data-path="second-week.html"><a href="second-week.html#leaflet-1.6"><i class="fa fa-check"></i><b>2.5.6</b> Leaflet 1.6</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="second-week.html"><a href="second-week.html#quiz"><i class="fa fa-check"></i><b>2.6</b> Quiz</a></li>
<li class="chapter" data-level="2.7" data-path="second-week.html"><a href="second-week.html#assignment"><i class="fa fa-check"></i><b>2.7</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="third-week.html"><a href="third-week.html"><i class="fa fa-check"></i><b>3</b> Third week</a>
<ul>
<li class="chapter" data-level="3.1" data-path="third-week.html"><a href="third-week.html#r-packages"><i class="fa fa-check"></i><b>3.1</b> R Packages</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="third-week.html"><a href="third-week.html#r-packages-part-1"><i class="fa fa-check"></i><b>3.1.1</b> R Packages part 1</a></li>
<li class="chapter" data-level="3.1.2" data-path="third-week.html"><a href="third-week.html#r-packages-part-2"><i class="fa fa-check"></i><b>3.1.2</b> R Packages part 2</a></li>
<li class="chapter" data-level="3.1.3" data-path="third-week.html"><a href="third-week.html#building-r-packages-demo"><i class="fa fa-check"></i><b>3.1.3</b> Building R Packages Demo</a></li>
<li class="chapter" data-level="3.1.4" data-path="third-week.html"><a href="third-week.html#r-classes-and-methods-part-1"><i class="fa fa-check"></i><b>3.1.4</b> R Classes and Methods Part 1</a></li>
<li class="chapter" data-level="3.1.5" data-path="third-week.html"><a href="third-week.html#r-classes-and-methods-part-2"><i class="fa fa-check"></i><b>3.1.5</b> R Classes and Methods Part 2</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="third-week.html"><a href="third-week.html#quiz-3"><i class="fa fa-check"></i><b>3.2</b> Quiz 3</a></li>
<li class="chapter" data-level="3.3" data-path="third-week.html"><a href="third-week.html#assignment-3"><i class="fa fa-check"></i><b>3.3</b> Assignment 3</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="fourth-week.html"><a href="fourth-week.html"><i class="fa fa-check"></i><b>4</b> Fourth week</a>
<ul>
<li class="chapter" data-level="4.1" data-path="fourth-week.html"><a href="fourth-week.html#swirl-courses"><i class="fa fa-check"></i><b>4.1</b> Swirl Courses</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="fourth-week.html"><a href="fourth-week.html#swirl-1.1"><i class="fa fa-check"></i><b>4.1.1</b> Swirl 1.1</a></li>
<li class="chapter" data-level="4.1.2" data-path="fourth-week.html"><a href="fourth-week.html#swirl-1.2"><i class="fa fa-check"></i><b>4.1.2</b> Swirl 1.2</a></li>
<li class="chapter" data-level="4.1.3" data-path="fourth-week.html"><a href="fourth-week.html#swirl-1.3"><i class="fa fa-check"></i><b>4.1.3</b> Swirl 1.3</a></li>
<li class="chapter" data-level="4.1.4" data-path="fourth-week.html"><a href="fourth-week.html#course-project-1"><i class="fa fa-check"></i><b>4.1.4</b> Course Project</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the Authors</a></li>
<li class="chapter" data-level="5" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>5</b> References</a></li>
<li class="divider"></li>
<p style="text-align:center;"> <a href="https://github.com/jhudsl/OTTR_Template" target="blank" > This content was published with</a> <a href="https://bookdown.org/" target="blank"> bookdown by:</a> </p>
<p style="text-align:center;"> <a href="http://jhudatascience.org/"> The Johns Hopkins Data Science Lab </a></p>
<p style="text-align:center; font-size: 12px;"> <a href="https://github.com/rstudio4edu/rstudio4edu-book/"> Style adapted from: rstudio4edu-book </a> <a href ="https://creativecommons.org/licenses/by/2.0/"> (CC-BY 2.0) </a></p>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Developing Data Products</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<head>
  <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,initial-scale=1.0">
  <!--script src="https://kit.fontawesome.com/6a26f47516.js"></script-->
  <!--<script src="assets/hideOutput.js"></script>-->
  <link href="assets/style.css" rel="stylesheet">
</head>



<div class="hero-image-container">
  <img class= "hero-image" src= "https://github.com/jhudsl/OTTR_Template/raw/main/assets/dasl_thin_main_image.png">
</div>
<div id="second-week" class="section level1" number="2">
<h1><span class="header-section-number">Chapter 2</span> Second week</h1>
<p>During this module, we’ll learn how to create R Markdown files and embed R code in an Rmd. We’ll also explore Leaflet and use it to create interactive annotated maps.
Learning Objectives
Create an R Markdown file
Employ R code in an Rmd
Create a map using Leaflet
Use Leaflet to add legends, markers, circles, and rectangles to your map</p>
<div id="quarto" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Quarto</h2>
<p>Quarto is a freely available publishing system designed for scientific and technical content. It is based on the popular Pandoc tool. Quarto is a publishing system that allows you to create and publish content to Posit Connect, a publishing platform. With Quarto, you can create and publish your content to Posit Connect, a publishing platform. Before utilizing Quarto, it is necessary to have it installed and properly configured in Posit Connect. In case you don’t have Quarto support, reach out to your Posit Connect administrator. Detailed instructions on setting up Quarto in Posit Connect can be found in the Admin Guide’s Quarto chapter.</p>
<p>Quarto content supports executable code in multiple languages, and supports interactivity through a number of technologies.</p>
<p>Posit Connect supports most of Quarto’s capabilities, including:</p>
<p>Rendering R, Python, and Observable JS code.
Running interactives written with Shiny, ObservableJS, and R htmlwidgets.
Rendering Quarto projects, documents, websites, and books.
Posit Connect doesn’t support the following Quarto capabilities:</p>
<p>Rendering Julia code chunks.
Running interactives written with Jupyter Widgets.
<a href="https://docs.posit.co/connect/user/quarto/" class="uri">https://docs.posit.co/connect/user/quarto/</a></p>
</div>
<div id="publishing-quarto-content" class="section level2" number="2.2">
<h2><span class="header-section-number">2.2</span> Publishing Quarto Content</h2>
<p>There are multiple ways to publish Quarto content to Posit Connect. See the linked documentation for each method for more on how to use it to publish Quarto content. (rewrite)</p>
</div>
<div id="r-markdown" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> R Markdown</h2>
<div id="r-markdown-1.1" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> R Markdown 1.1</h3>
<p>This lecture will discuss how to create reproducible presentations using R Markdown. In previous versions of the class, we covered several ways to do this, including R Studio Presenter and Slidify. However, in this latest version, we will focus solely on Markdown. R Markdown is already covered in the data science specialization’s class on reproducible research, but we will still touch on why it’s important to create reproducible documents and presentations.
R Markdown is a feature of R Studio that enables the creation of documents, such as HTML documents, directly from within R. What makes it particularly useful is that it embeds code, results, and plots from the analysis into the document, making it a self-contained and reproducible unit. In contrast, traditional workflows typically involve separate documents and code files, with manual copying and pasting or saving and importing files, which can create issues with version control and reproducibility. R Markdown provides a consistent structure for generating presentations and documents, making it a better option for those concerned with reproducibility. For instance, in a corporate setting where a report needs to be presented routinely, having a script that generates the presentation with the latest data in a version-controlled way would be more efficient and reliable than manually copying and pasting each time. R Markdown can be useful for creating recurring or automated presentations, but it has many other uses as well. One important benefit is its ability to improve the reproducibility of documents. In the academic community, there have been many instances where papers have been published and subsequent groups have tried to reproduce the results, only to find that it’s often not possible. This can lead to disputes and uncertainty over who is right. However, embedding the code in a document using R Markdown greatly improves its reproducibility. While there may still be some external factors that impact the results, overall it goes a long way towards creating more reliable and reproducible documents. Let’s hope that you’ve already covered some of these concepts in your reproducible research class as part of the data science specialization. However, if you’re taking this class in Ovo, we’ll guide you through a few examples with a focus on creating reproducible presentations. This class emphasizes the creation of products, and your presentation serves as your product pitch. Therefore, we want your pitch to be in one of these reproducible formats. So, let’s move on to some examples.</p>
</div>
<div id="r-markdown-1.2" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> R Markdown 1.2</h3>
<p>Alright, we have reached this slide in our presentation. From here on, we will be demonstrating the code to create reproducible presentations using R Markdown. So, instead of going through the slides one by one, we will switch to R Studio and show you how to do this practically.
It’s important to highlight that we follow the same approach we’re teaching, and we have actually created the slides for this class using R Markdown. However, for the purpose of this demonstration, we will create a new presentation. To do so, we need to go to File &gt; New File &gt; R Markdown, which can also be accessed through Alt+F &gt; F &gt; R Markdown, that is M. Once there, we will see a “Presentation Title” field, where we can name our presentation “My Fancy Presentation” and add our name as the author. There are various output options available, but for now, let’s stick with the ioslides format as the default option. However, if you prefer a PDF output, it requires the installation of MiKTeX on Windows, MacTeX on OS X, or TeX Live on Linux. These installations are easy to set up but can be quite large. We’ll cover this in more detail later in the lecture. The ioslides format was created based on one of the Google presentations. Okay, so the file name for the R Markdown commands is currently “Untitled1”. Let’s compile it once to see what it looks like. You can either click on “Knit the current document” or use the shortcut Ctrl+Shift+K. I’m going to name my file “briansSlides” instead of the default name. And there you go, it’s running and the output is “My Fancy Presentation”. Your homework is to create a new presentation using the template, compile it once, and then we’ll move on to adding content.</p>
</div>
<div id="r-markdown-1.3" class="section level3" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> R Markdown 1.3</h3>
<p>Let’s take a look at the preamble section surrounded by three dashes. You can change the title, author, and date from here. You can also change the format if you want it to be a different type of output, such as “slidy” instead of “ioslides”. The knitr options specify that code included in the document won’t be echoed by default. To create a new slide, add two pound signs and then the slide title, such as “My New Slide”. Let’s knit the document to see the changes. Alright, now we have a slide with some content and a slide without a title. As you can see, we used two pound signs to create a slide with a title, and three asterisks to create a slide without a title. Let’s knit it again to see how it looks. Let’s take a look at our new slides with some content, and the slide without a title. Now, let’s add a subheading. We’ll use two pound signs for “My title”, three pound signs for a top-level subheading, and four pound signs for a second-level subheading. Let’s knit it to see how it looks. Remember, you can also use Ctrl+Shift+K to knit the document. Now, let’s add some more content by creating a list with two bullet points. Okay, let’s take a look at the YAML preamble first. The YAML section is surrounded by three dashes, and it contains information such as the title, author, date, and output format. You can easily change these options at this point.</p>
<p>To create a new slide, simply add two pound signs and the title of the slide. For example, “## My New Slide”. To create a slide without a title, use three asterisks like this: “***“.</p>
<p>To add subheadings, use three or four pound signs depending on the level of the subheading. For example, “### Top Level Subheading” and “#### Second Level Subheading”.</p>
<p>To create a bulleted list, use two dashes to start each item. For an ordered list, use numbers followed by a period. For example, “1. Item a” and “2. Item b”.</p>
<p>Once you have added your content, you can knit the document to see the final output. You can use the shortcut Ctrl+Shift+K to knit the document.</p>
<p>Now, it’s time to create some slides with your own content. Add titles, headings, subheadings, bulleted and ordered lists to your slides.</p>
</div>
<div id="r-markdown-1.4" class="section level3" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> R Markdown 1.4</h3>
<p>Let’s take a look at some formatting options. For instance, if I write plain text, <em>italicized text</em>, and <strong>bold text</strong>, you can see that it’s automatically syntax highlighted. Additionally, I can add some code, such as <code>1:10</code>, by using single right-facing quotation marks. Remember that to use italics, you need to have one asterisk next to the leading character, and to use bold, you need two asterisks next to the leading character. It’s important to note that the asterisks must be next to the leading character for it to work correctly. Let’s run it now and see the results.</p>
</div>
<div id="r-markdown-1.5" class="section level3" number="2.3.5">
<h3><span class="header-section-number">2.3.5</span> R Markdown 1.5</h3>
<p>Alright, let’s take a look at some formatting options. If I just type in plain text, <em>italicized text</em>, and <strong>bold text</strong>, notice how the formatting automatically adjusts. Also, here’s an example of some code: <code>1:10</code>. To indicate that it’s R code, we surround it with single quotation marks and specify the language as “r” in the curly braces at the beginning. You’ll notice that the code is highlighted differently than the rest of the text. Let’s add a bit more code: <code>head(mtcars)</code>. This will show the first few rows of the dataset “mtcars”. You can actually run the code in RStudio and see the output down below. However, to generate the entire document, hit Ctrl+Shift+K and there you have it - a new slide. Okay, let’s experiment with the options available. I’ve deleted some of the slides, so we can focus on this simple code example. I noticed that I don’t like the comment characters in front of the output, so I’ll use the <code>comment</code> option to remove them. Let’s try it out with <code>comment = ""</code>. Great! Now, let’s play around with some more options. I deleted some slides so we can focus on this simple code example. Initially, I didn’t like the comment characters in front of the output, so I tried using the “comment” option to get rid of them. I set it to nothing, and it looks better now.</p>
<p>By default, the “echo” option was set to false, which means that it didn’t show the code that generated the output, just the output itself. When typing in Knitr options, you can see a list of available options once you add a comment and start typing.</p>
<p>If I set “echo” to true and regenerate the presentation, you’ll see that it now shows both the output and the code that generated it. The default option is “echo=true”, which means that you don’t have to specify it explicitly. I could have also just removed the Knitr options at the beginning and it would have behaved the same way, since “echo=true” is the default.</p>
<p>Let’s try this instead:</p>
<p>Now, let’s experiment with some Knitr options. By default, the <code>echo</code> option is set to <code>false</code>, which means that it doesn’t show the code used to generate the output. If we want to see the code, we can set <code>echo</code> to <code>true</code>. For example, if we use <code>echo = TRUE</code>, we will see both the code and the output.</p>
<p>If we want to show the code but not evaluate it, we can set <code>eval</code> to <code>FALSE</code>. On the other hand, if we want to hide the code and only show the output, we can set <code>echo</code> to <code>FALSE</code>.</p>
<p>There are many other options available in Knitr that can be used to customize the output of our R code. To change the comment character, for example, we can use <code>comment = ""</code>.</p>
<p>Now, it’s your turn to try it out. Create a slide with some R code and experiment with different Knitr options to see how they affect the output. In the next section, we’ll cover how to include figures in our presentations.</p>
</div>
<div id="r-markdown-1.6" class="section level3" number="2.3.6">
<h3><span class="header-section-number">2.3.6</span> R Markdown 1.6</h3>
<p>Alright, let me show you a plot that I created using the code: <code>plot(empty_cars$weight, empty_cars$mpg, xlab="Weight", ylab="MPG")</code>. Here’s what it looks like:</p>
<p>[My Awesome Figure]</p>
<p>As you can see, I also used some of the figure options in knitr, such as <code>echo = FALSE</code> to not show the code, <code>fig.align = "center"</code> to center the figure, and <code>fig.cap = "My AWESOME figure"</code> to add a caption. There are many other figure options that you can explore in knitr. Let me summarize what you just explained. To show a plot without the code, you can set the “echo” option to FALSE when calling the plot function. You can also use other figure options such as “fig.align” and “fig.cap” to control the alignment and add a caption to the figure. To publish your slides, you can use R markdown to create an HTML file, which can be opened in a browser. You can also use R pubs, Drop Box, or GitHub to publish it online. GitHub is one of the most popular ways to share code and collaborate with others. Let me demonstrate how to publish your slides using different methods. First, let’s review some of the options for publishing your slides in R Markdown. When you knit your R Markdown document using <code>knit HTML</code>, it creates an HTML file in your directory. For example, if your R Markdown file is named <code>briansSlides.Rmd</code>, it creates a <code>briansSlides.html</code> file. You can open this file in a web browser to view your presentation.</p>
<p>You can also publish your slides online using several platforms. One option is R Pubs, where you can share your presentation with others. Another option is to put it in a Dropbox public folder, or you can publish it on GitHub.</p>
<p>To publish your slides on GitHub, you can create a repository and push your R Markdown and HTML files to it. For example, Sean Cross’ Developing Data Products course has a page for slides in his GitHub repository. You can see that it is just an R Markdown file and the associated HTML file pushed up into GitHub.</p>
<p>When you click on the R Markdown file in GitHub, it does a lot of the formatting for you. It recognizes that it is an R Markdown document and does a lot of formatting ahead for you. You can see what the bullets and various points are going to look like. When you click on the HTML file, it shows you the raw HTML, not the rendered presentation. Okay, let’s discuss how to render the HTML file. There are different ways to do it, such as using a Chrome or Firefox add-on, but Sean published his slides through GitHub Pages. He created a branch called “gh-pages,” which is required for GitHub Pages to work. Usually, a Node.js file is also needed in the root directory, but it seems Sean didn’t have to use it. To access the rendered HTML, you just need to slightly modify the URL by replacing “github.com/seankross” with “seankross.github.io” and removing “slides/blob/gh-pages” from the path. Then, you just need to navigate to the subdirectories where the HTML file is located. For example, in Sean’s GitHub repository, the file is in “slides/Developing Data Products/R Markdown/R Markdown.html.” These slides are now hosted on GitHub, which is a convenient option for data scientists who are already using GitHub to manage their projects. Personally, I push my course materials to a public GitHub repository and my private research to a private repository. Okay, now it’s time to create a figure in your presentation and experiment with the different figure options available. I also want you to try publishing your presentation to GitHub. If you encounter any issues, read up on GitHub pages or try publishing to Rpubs instead. You can easily publish to Rpubs by clicking on the publish button in RStudio. Once you’ve published your presentation, make sure to verify that the HTML file gets created in your directory. You can also host it on your computer and view it offline, which is useful if you’re working in an environment without internet access.</p>
<p>Hosting your presentation on GitHub can be technically challenging, but it’s worth trying since it’s a convenient way to publicly host your repositories. Once you’ve developed your project, you’ll create a pitch in R Markdown and hopefully host it on GitHub or another platform. This way, we can all view your project and appreciate how awesome it is.</p>
<p>That’s all the information about R Markdown we need for this class. Thank you for listening, and we’ll see you in the next lesson.</p>
</div>
</div>
<div id="a-few-ways-to-share-r-markdown-products" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> A few Ways to Share R Markdown Products</h2>
<p>If you are dealing with a small group who have access to R you can simply share the R code and the R Markdown file or just RMarkdown rendered as HTML file and simply email it to a colleague. If they don’t have access to R, or you don’t wat to share your code you can share the HTML file. Furthermore, if you wish to share the HTML file with a wider audience, you can host it on a website. There are several options for doing this.
We recommend the following websites for sharing the HTML files that you produce from R Markdown documents. If you’ve taken The Data Scientist’s Toolbox then you should be familiar with <a href="https://pages.github.com">GitHub Pages</a>. If you’re familiar with Git and you haven’t used it before their documentation for creating a site is very straightforward. GitHub also offers an anonymous option for hosting a single HTML file, called <a href="https://gist.github.com">Gist</a>.</p>
<p>If you’re not familiar with Git and you’re using RStudio you should take advantage of <a href="https://rpubs.com">RPubs</a>, which is perhaps the easiest way to share an HTML document from RStudio. You can find simple instructions for using RPubs <a href="https://rpubs.com/about/getting-started">here</a>. You can also take advantage of <a href="https://www.shinyapps.io">ShinyApps.io</a> which is an alternative of RPubs for Shiny applications. If you’re looking for a site that will host any HTML file for free, including HTML files that are generated by R Markdown, you should check out <a href="https://neocities.org">NeoCities</a>. You’ll need to provide links to HTML files you’ve created with R Makrdown in upcoming peer assessments, so make sure to familiarize yourself with one of these sites.
## Plotly</p>
<div id="plotly-1.1" class="section level3" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Plotly 1.1</h3>
<p>In this lecture, we will be discussing Plotly - a handy web application and R library. Although we had previously recorded a video on it during its early development for R, there have been a lot of developements since then. Plotly is a great tool for creating interactive web graphics in R, and it has the added benefit of integrating with multiple languages. Essentially, Plotly is a web application that enables the creation and sharing of visualizations. Plotly is a versatile web application and library for R that allows users to create interactive web graphics. It can work with several programming languages including MATLAB, Python, and JavaScript. In addition to its integration with different languages, Plotly offers a web interface for users who prefer to upload csv files and create plots with point-and-click interactions. Plotly is particularly easy to use with R and RStudio. To install Plotly, users can simply type “install.packages(”plotly”)“. To use it, they can load it with”library” or “require (”plotly”)“. Plotly plots can be shared through its web interface, which offers free and paid options for private displays and user authentication. Alternatively, users can create HTML graphics that can be shared on their own websites with the Plotly R package. The Plotly web interface offers tools for interactively changing axis labels, a feature that is not available in R. In this lecture, code demonstrations will be used to showcase different types of Plotly plots. It is worth noting that Plotly graphics can be embedded in R Markdown documents, including Slidify, R Studio Presenter, and Slidy documents.</p>
</div>
<div id="plotly-1.2" class="section level3" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Plotly 1.2</h3>
<p>Here in the R markdown document associated with the Plotly lecture, I will be using the library(plotly) function, assuming that I have already installed it. The plot_ly() command is straightforward: plot_ly(mtcars, x = “weight”, y = “miles per gallon”, mode = “markers”). The mtcars dataset is stored as a dataframe and serves as the data source for this command. The x-axis represents weight, while the y-axis represents miles per gallon, and the mode is set to markers, creating a scatter plot. This code can be replicated for any dataframe to generate a scatter plot. The resulting scatter plot is interactive and can be viewed in the RStudio viewer pane. As you move your cursor over the points, their corresponding x and y values are displayed. In addition, there are various controls at the top of the viewer pane that enable you to download the plot as a PNG, adjust the scale, reset the axes, and modify the hover-over behavior, among other things. The Publish button allows you to publish the plot to RPubs with a single click, generating a web graphic. However, we’ll demonstrate other methods for publishing the plot shortly. Another easy way to publish the plot is to click on Export and choose to Save as Web Page. This creates a Web page with the plot and a file with the specified name, which can be referenced and embedded into other projects. Plotly is incredibly user-friendly and straightforward. Your first assignment is to create a simple scatter plot with a different dataset, save it as a webpage, and create graphics in PNG and PDF formats. You can also try publishing the plot to RPubs.</p>
</div>
<div id="plotly-1.3" class="section level3" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Plotly 1.3</h3>
<p>Let’s explore some options for scatter plotting in plot_ly, as scatter plots are a common type of visualization. One option is to change the color of the points. For example, we can use the “cyl” variable from the mtcars dataset as a factor variable for coloring the points. To do this, we convert the “cyl” variable to a factor using the function as.factor(cyl). Then, we plot the scatter plot using plot_ly(mtcars, x = weight, y = mpg, color = as.factor(cyl), mode = “markers”). This will create a scatter plot where the points are colored based on the number of cylinders in the car, which is effectively a categorical variable. By default, the legend will display the three values of “cyl”: 4, 6, and 8.</p>
<p>Another option is to use a continuous variable for coloring the points. For example, we can use the “disp” variable from the mtcars dataset, which is a continuous variable. To do this, we plot the scatter plot using plot_ly(mtcars, x = weight, y = mpg, color = disp, mode = “markers”). plot_ly will recognize that “disp” is a continuous variable and use a continuous color gradient to display the points. The key to the gradient will be displayed on the side of the plot.</p>
<p>Let’s explore the option of changing the point size in scatter plots using plot_ly. Currently, the points in the scatter plot appear small, almost invisible when outputted to an HTML file. We can change the size of the points using a continuous variable, in this case, horsepower. Each point will have a different size based on its horsepower. Color is already being used to represent the cylinder. By changing the size of the points, we can show four dimensions in the same plot: miles per gallon, weight, cylinders, and horsepower. However, since we’re limited to a 2D scatter plot, color and size are the only two dimensions we can display along with the x and y coordinates. Let’s look into a 3D scatterplot. We will run the code and display the plot, and then we will explain what it’s doing. This is another way to add a dimension to a scatter plot. The plot is created using web GL, which is a web-based version of the open GL graphics library. It allows you to embed interactive 3D graphics in webpages. So when you output it as a webpage, it will be interactive just like this. We have three variables in this example: temperature, pressure, and dtime. To create the dataset, we generated 100 random normal values for temperature and pressure, and dtime is just the numbers 1 to 100. We use the same “plot_ly” command as before, specifying the x, y, and z variables and setting type to “scatter3d” and mode to “markers”. To add a color gradient to the plot, we use the “color = temp” parameter, which displays a key to the gradient on the side of the plot. This creates a nice interactive 3D scatter plot. For homework, I would like you to create a variety of 2D scatter plots using different plotting attributes, such as color and point shape, to visualize other dimensions. You can also create a 3D scatter plot and output it as a web page to become familiar with working with these types of plots. You may consider publishing your scatter plots on platforms like rpubs to have a public hosting. Give it a try and explore the possibilities. Next, we will discuss some even more exciting applications of plot_ly.</p>
</div>
<div id="plotly-1.4" class="section level3" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> Plotly 1.4</h3>
<p>Let’s discuss a different type of chart, the line graph. To illustrate this, let’s use the “airmiles” dataset, which is a time series with values corresponding to each year. We can confirm this by typing “data(”airmiles”)” and then “time(airmiles)” to see the associated times.</p>
<p>To create the line graph using Plotly, we simply use the “plot_ly” command with the “x” argument set to the time variable and the “y” argument set to “airmiles”. Since these variables are in our environment, we don’t need to specify a data frame. Once we plot the data, we get a time series chart with the added feature of showing the corresponding x and y values when the mouse hovers over the plot. This type of chart is often used to display market indices, such as the S&amp;P 500. Let’s talk about creating a line graph using time series data. We can use the “airmiles” dataset as an example. It is a time series with values corresponding to each year. To create the line graph, we can use the “plot_ly” command, with “x” as the time variable and “y” as the airmiles variable. The resulting plot will display the values over time, and when we hover over the plot, it will display the corresponding x and y values. A similar plot is often used to display market indices like the S&amp;P 500.</p>
<p>Now, let’s create a multi-line graph using stock market data. We’ll need to use the “tidyr” and “dplyr” libraries for data manipulation. The “EuStockMarkets” dataset contains market indices from Germany, Switzerland, France, and Britain. To create the plot, we first convert the dataset into a data frame using the “as.data.frame” command. Then, we use the “gather” command to convert the data into a format suitable for plotting. The resulting data frame can be used with the “plot_ly” command to create a multi-line graph. Note that the original data EuStockMarkets is not a data frame, as shown by the output of is.data.frame(EuStockMarkets). However, after converting it to a data frame using the command as.data.frame(EuStockMarkets) and then applying the gather command, we have transformed the data from a short format to a long format. In the long format, there is a variable called index which corresponds to the column name of the data points in the original data. Although this format may not be as convenient for display purposes, it is necessary for plot_ly to display multiple lines, as it requires a single data frame with a factor variable that demarcates the different lines. Let’s take a look at how we can create a multi-line graph using stock market data. To begin with, we need to convert the data into a data frame. EuStockMarkets is not a data frame, as shown by the is.data.frame() function. Therefore, we first need to convert it into a data frame using the command “stocks &lt;- as.data.frame(EuStockMarkets)”. We then use the gather() function from tidyr to convert the data from a short format to a long format, where each index type is now in a single column called “index”. The final step is to create the time variable using the command “stocks$time &lt;- as.Date(rownames(stocks))”. Once the data is formatted correctly, we can create the plot using plot_ly, where x is time, y is price, and color is the index type. The resulting plot will display the different index types in different colors and allow for interactive hovering over specific points to see the index value at that time. It’s worth noting that using tidyr and dplyr for data manipulation is essential and highly recommended. Give it a try using this data or some other stock market data, and see if you can create your own multi-line stock market graph to display on a webpage.</p>
</div>
<div id="plotly-1.5" class="section level3" number="2.4.5">
<h3><span class="header-section-number">2.4.5</span> Plotly 1.5</h3>
<p>The following examples are straightforward, so I won’t provide any code demonstrations. Instead, I’ll show you the resulting output. To create a histogram in plot_ly, you only need to specify the x variable and set the type to “histogram.” The output will show the height of the bars as you move the mouse along. Additionally, you can customize the colors, create side-by-side histograms, and perform a variety of other actions in plot_ly.</p>
<p>For a boxplot, you’ll need to provide the plot_ly data frame (in this example, it’s the iris dataset), set the y variable to petal length, specify the color as species, and set the type to “box.” This will generate separate boxplots for each species. When you hover over the boxplot, it’ll display values such as the 25th percentile, 75th percentile, and median. The whiskers extend out to 1.5 times the distance between these two values, as per Tukey’s idea, which refers back to the normal distribution and the 1.5 times the inter-quartile range. If there’s an outlier, plot_ly will display a little point to indicate it.</p>
<p>The following examples are relatively straightforward, so I won’t provide code demonstrations. For a histogram, simply specify type=“histogram” and the x variable. Here is an example:</p>
<p>[Output shown]</p>
<p>You can change the colors, display side-by-side histograms, and perform other modifications using plot_ly. The process is intuitive. For a box plot, use the plot_ly data frame, specify y=petal length, color=species, and type=“box”. The result will be separate box plots for each species. Here is an example:</p>
<p>[Output shown]</p>
<p>Hovering over the box provides information about the box plot, such as the median, 25th and 75th percentiles, and whiskers that extend 1.5 times the distance between these values. A heat map is essentially a graphical representation of an image. To create one using plot_ly, generate a matrix with random normal values and specify z=matrix, type=“heatmap”. The result will be an interactive heat map with a color key on the right-hand side. As you move your mouse around, plot_ly will display x and y values and the corresponding intensity values. We can create a similar dataset as before, but with different random normal values. Next, instead of plotting the intensity values as colors, we can plot them in a third dimension as a surface. To do this, we set the type as “surface” and specify the z values as the intensity values. The row and column values are assigned integers for the x and y values. The resulting plot is a 3D surface. It’s worth noting that when plotting a 3D surface, there is some smoothing involved, so it’s important to understand what this smoothing is doing if you plan on using this for real.</p>
</div>
<div id="plotly-1.6" class="section level3" number="2.4.6">
<h3><span class="header-section-number">2.4.6</span> Plotly 1.6</h3>
<p>Okay, let’s create a map with some interactive hover-over effects. The code in this example is a bit long, so I won’t go over every detail. First, let’s create the dataset and then display it.
Here we show you the first few rows of this dataset. As you can see, there are 50 rows, each representing a state. For example, the first row is for Alabama and includes its population in millions and some hover-over text. The hover-over text includes the state abbreviation, “AL”, a line break, and the population in 1975, which was 3,615,000. We can also add red borders as an option, although it’s not necessary. Additionally, the map options will be a list and we will set the scope to the USA. You can experiment with different options to see what works best. To dramatically alter this map for a different region or country, you may have to improvise a bit, but many of the options are self-explanatory. The “showlakes = TRUE” option simply means that lakes will be displayed, and in this case, the lake color was set to white to avoid blending in with the blue population color.
To break down the code we start by selecting the first couple of rows of the dataset and displaying them to get an idea of what it looks like. It contains the population of each state in millions and some hover-over text which includes the state abbreviation and population in 1975.
Next, we set some map options such as showing the lakes, setting the lake color to white, and selecting the USA as the scope.
Then we use the <code>plot_ly</code> command to create the choropleth map. We use the <code>state_pop</code> dataframe, set the population column as the color variable, and use the state column for locations. We set the type to choropleth and location mode to USA-states. We use a blue color palette and specify that we want to draw markers on the borders.
Finally, we pass the output of <code>plot_ly</code> to <code>layout</code>, which sets a title and includes the map options we previously set.</p>
<p>We can go ahead and run this code now.
In our case, it was a bit complicated and the map wouldn’t display in the viewer. So, we saved it as a web page and overwrote the template web page that we’ve been using for this example. Now, when if we hover over a state, we can see its population. For example, when we can hover over Alabama and see its population of 3,615,000 in 1975.</p>
<p>If you want to create your own map, start by using this data frame, which has more columns than just population, and try creating different maps with various options. As you experiment with different options, you’ll get a better understanding of how they work. To begin with, you can replicate the map we just created and then attempt to create another map using different variables, where the color represents something else. This can be a helpful technique to create interactive maps.</p>
</div>
<div id="plotly-1.7" class="section level3" number="2.4.7">
<h3><span class="header-section-number">2.4.7</span> Plotly 1.7</h3>
<p>If you’re a fan of ggplot, then you might like this code from the Plotly website. I’m using the diamond dataset to create a ggplot of carat vs. price. What’s cool is that Plotly has a function called ggplotly that allows you to easily convert a ggplot into an interactive HTML graphic. The top window shows the ggplot in the RStudio plotting pane, while the bottom window displays it as an HTML graphic in the RStudio viewer pane, just like it would appear in a web browser.</p>
</div>
<div id="plotly-1.8" class="section level3" number="2.4.8">
<h3><span class="header-section-number">2.4.8</span> Plotly 1.8</h3>
<p>To directly post a Plotly graph we will follow the previous video. We created a GG plot example, labeled GG, which can be displayed in the viewer pane by typing GG in the R prompt. However, if we type plotly_POST GG, it will post it directly to the Plotly website. You can then use their web-based graphical user interface to edit the graph by clicking on the edit option. Plotly has many tutorials and videos to help you understand how to use it. Before using Plotly, you must set two environment variables - plotly username and plotly API key. You can find your API key by going to the settings in Plotly and copying and pasting it from there. If you set these two environment variables in your .Rprofile, you won’t be prompted for your credentials every time you start R, making the process seamless.</p>
</div>
</div>
<div id="leaflet" class="section level2" number="2.5">
<h2><span class="header-section-number">2.5</span> Leaflet</h2>
<div id="leaflet-1.1" class="section level3" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Leaflet 1.1</h3>
<p>Creating interactive maps is crucial in developing data products. One widely used JavaScript library for this is Leaflet, which also has an associated R package that enables the creation of interactive maps in the R environment. Using Leaflet within RStudio is especially convenient as it opens up in the RStudio window. While there are other ways to create interactive maps, such as GoogleVis, Leaflet is popular among the R community. However, you may also want to explore creating maps using Google Maps in the GoogleVis lecture. To get started with Leaflet, you should first install the package by running the command install.packages(“leaflet”). Let’s now look at a code example that demonstrates how to create your first Leaflet map in R. The R Markdown document for the following slides contains two sections - one that displays the code and another that evaluates it. To create the map, first load the library by running library(leaflet), and then execute the three commands provided. You can then zoom in as much as you like on the resulting map. In order to develop data products, creating interactive maps is an important aspect. The Leaflet package for R makes use of the Leaflet JavaScript library to create such maps within the R environment, and is particularly convenient to use within RStudio. We will begin by exploring some Leaflet examples to get you started, and it won’t take long for you to become familiar with it. While there are several other ways to create interactive maps, such as using GoogleVis, Leaflet is widely accepted and widely used within the R community. To get started, you need to install the package by running install.packages(“leaflet”). The code for creating your first Leaflet map in R is shown in the R markdown document for the next few slides, and it includes piping notation which we will use heavily in these lectures. The first command, leaflet(), generates the map, while the addTiles() command adds the first set of content. We will discuss how to add more useful features, such as markers, later on. For now, try generating a world map and zooming around to ensure that you have successfully installed the Leaflet library.</p>
</div>
<div id="leaflet-1.2" class="section level3" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Leaflet 1.2</h3>
<p>We were able to quickly generate a JavaScript map widget without any knowledge of JavaScript using the Leaflet function, which creates a background layer. The addTiles function adds mapping data from Open Street Map to the background. After adding this content, we can zoom in and explore the map. However, to add markers and direct interactivity, we need to use the addMarkers function, which is very easy to use. We can specify the longitude and latitude of a location and add a label to the marker. In the example, we added a marker for Johns Hopkins hospital with the label “Jeff Leek’s office”. The piping notation was used, and although it can be a little strange at first, it’s a cleaner and easier way to read the code. We can click on the marker to see Jeff Leek’s office and zoom in to see the Bloomberg School of Public Health. To recap, we were able to generate a map without knowing any JavaScript by using the leaflet function, which creates a background for the map. The addTiles function adds mapping data from OpenStreetMap to the background, and this allows us to zoom in and out and look around. However, to add specific content, like markers, we need to use additional functions. The addMarkers function is used to add markers to the map at specific longitude and latitude points, and we can also give them labels.</p>
<p>Now, let’s go through the code. To explain the piping notation, I will show you the equivalent code. First, let’s reset my_map to its initial state with no markers. Then, to add the marker, we use the addMarkers function and pipe the output to my_map using the piping notation. This is equivalent to writing my_map = addMarkers(my_map, …), and the code we used adds a marker at a specific location with a label. I will copy this code, as it is easier than retyping it.</p>
<p>Additionally, it is worth noting that the Bloomberg School of Public Health is the oldest School of Public Health in the country. Okay, let’s break down what’s happening here. The lines of code that we just wrote to add a marker are equivalent to this one line of code. We’re using the pipe operator to pass <code>my_map</code> as the first argument to the <code>addMarkers()</code> function. Then, we assign the result back to <code>my_map</code>.</p>
<p>Now, you might be wondering why we’re doing all of this when we could have just kept the one-liner. Well, the reason is that piping is a powerful tool that you’ll want to get used to, especially when you’re doing chained operations in tools like <code>dplyr</code> or in mapping contexts like this. When you’re adding lots of layers and markers, it can become tedious to keep retyping the same set of commands. The first line is only necessary because we separated it from the set of lines up above. Let me show you another way of writing this code, which is what you would likely do. Instead of using the piping operator, you would assign <code>my_map</code> to the initial map and then add the marker using <code>addMarkers()</code>. This set of commands is equivalent to the previous one. The reason why you might prefer the chaining approach is that it simplifies the code and avoids having to reassign the variable every time you add a new layer or marker. This is particularly useful when working with complex maps with lots of layers and markers. From now on, we will use the chaining approach to demonstrate Leaflet commands.</p>
<p>To add a marker, you just need to provide the <code>addMarkers()</code> function with the <code>my_map</code> variable as the first argument, followed by the longitude and latitude coordinates, and the text for the popup. For example, in the code we just saw, the longitude and latitude coordinates are for Jeff Leek’s office and the popup text says “Jeff Leek’s office”. If you have a map with many markers, you can use this function to add each one with its own set of coordinates and popup text. We will cover more examples in the following sections.</p>
</div>
<div id="leaflet-1.3" class="section level3" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> Leaflet 1.3</h3>
<p>To add a lot of markers, you can simply put the collection of markers in a data frame. Here’s an example. First, let’s set the seed so that we get the same results every time we run the code. Then, we’ll create a data frame with some random longitude and latitudes. The data frame has 20 rows, and the columns are named “lat” and “lng”. We’ll pass this data frame as an argument to leaflet to create our map, which will initially be blank. If we run the code up to this point, we’ll get a blank map. Next, we’ll pass the output of the leaflet argument evaluated at the data frame to the addTiles function. This will add the mapping data to the map, but won’t plot anything yet. Finally, we’ll pass the map with the mapping data to the addMarkers function to add the markers. You can run the entire code at once instead of in pieces. The resulting map will have multiple markers. Give it a try by creating your own data frame with random longitude and latitudes and adding it to a map with markers.</p>
</div>
<div id="leaflet-1.4" class="section level3" number="2.5.4">
<h3><span class="header-section-number">2.5.4</span> Leaflet 1.4</h3>
<p>In the following code, we will cover two topics: adding custom markers and separate popups for each marker. We want to achieve this result, where each marker displays the Hopkins logo and has a separate popup. Here is an example of what we’re aiming for. We’ll first define our Hopkins icon by specifying its URL, width, height, and anchor points. Then we’ll create a series of latitude and longitude values for buildings at Hopkins. We’ll pass these values to leaflet, which will generate a map with markers using the addTiles and addMarkers functions. However, we also need to set the icon for each marker to the Hopkins icon. Once we have the markers displaying the Hopkins logo, we want to add links to each marker. We’ll create a series of sites, which are text vectors containing HTML commands that create a hyperlink for each building. These sites correspond to the latitude and longitude values in the same order. Finally, we’ll pass the latitude and longitude values to leaflet, addTiles, and addMarkers functions, along with the Hopkins icon. We’ll set the popup to display the collection of hopkinsSites. Once we run the entire code, we will have a map with Hopkins logos at each marker, and separate popups with links for each building.</p>
</div>
<div id="leaflet-1.5" class="section level3" number="2.5.5">
<h3><span class="header-section-number">2.5.5</span> Leaflet 1.5</h3>
<p>Leaflet offers a great solution for situations when multiple points appear too close together to differentiate. This solution is clustering, where the points are grouped together and will break apart into individual points when the map is zoomed in. To demonstrate this feature, we can define a data frame with 500 latitude and longitude points that are close together and pass it as an argument to leaflet. Then, we can add tiles and markers with default cluster options. The clusters will show the number of points they contain. As we zoom in, the clusters break apart into individual points. Additionally, we can add circle markers instead of standard pop-ups or clusters by using the add circle markers command. We can create a couple of 20 markers and add circle markers to them. This will display the markers as little circles.</p>
</div>
<div id="leaflet-1.6" class="section level3" number="2.5.6">
<h3><span class="header-section-number">2.5.6</span> Leaflet 1.6</h3>
<p>Now, let’s discuss how to digitally draw shapes on your map. This can be accomplished using commands that allow you to draw circles and rectangles, and even add a legend to your map. These commands will enable you to annotate and draw on your map in useful ways. We will demonstrate how to draw a circle in a way that you might actually want to use. For example, we have a dataset of cities such as Baltimore, Frederick, Rockville, and Gaithersburg, along with their population, latitude, and longitude. We will pass this dataset to leaflet, add tiles to it, and then add circles to it using the addCircles command. We will also provide some important options such as scaling the radius relative to the population of the cities. This is a more reasonable use of adding circles than just having them as markers. Let’s go ahead and run the code to see the result. Alright, now we have the circles representing the population of the cities and we can see the relative sizes of the circles. Let’s move on to drawing rectangles. We can use the addRectangles command to do that. Here’s an example where we’re going to draw a rectangle around Baltimore city. So we’ll define a bounding box that contains Baltimore and then use that to draw the rectangle. Finally, we’ll add a legend to the map to explain what the circles and the rectangle represent. So let’s get started.</p>
<p>We’ll define a bounding box that contains Baltimore using the leaflet boundingBox function. Then we’ll pass that to the addRectangle function along with some options to define the color and opacity of the rectangle. Finally, we’ll add a legend to the map using the addLegend function. This will display a key explaining what the circles and rectangle represent. So let’s run the code and see the final map. Let’s move on to adding a rectangle to the map to show you what it looks like. We’ll use the same process as before, starting with leaflet, adding tiles, and then adding the rectangle. For a rectangle, you just need to provide the coordinates of its two opposite corners. In this example, we’re creating a rectangle around the Mountain View Corporate Center. Next, let’s cover how to add a legend to the map. This is a common task when you want to differentiate between different annotations, such as circles and rectangles, using different colors and symbols, and want to provide a key for users to understand what each one means. Here, we have a data frame containing 20 points. Let’s try creating a rectangle to demonstrate how to add it to the map. First, we’ll add tiles to the Leaflet map. Then, we’ll add a rectangle using the coordinates of its two opposite corners. Here’s the rectangle that we created, which happens to be the Mountain View Corporate Center. Finally, we’ll cover how to add a legend. When you add markers to your map, you may want to color them differently and add a legend to help the user understand what each color represents. In this example, we have a data frame with 20 points, colored red, blue, or green. We pass the data frame to Leaflet and add circle markers colored according to the random color we generated. Of course, in a real application, you would want to use colors that have a specific meaning. To add a legend, we use the same syntax as the legend command in base R plotting. We define labels, in this case just LETTERS[1:3], and colors, which are blue, red, and green. When we run the code, the legend appears at the top of the map. This is the last lecture on Leaflet. We hope you found it useful. Leaflet is a powerful tool, and when used in conjunction with Shiny, it can create amazing applications. It’s also one of the easiest interactive plotting utilities available in R, and definitely worth learning. Thanks for joining us, and we look forward to seeing you in the next lab.</p>
</div>
</div>
<div id="quiz" class="section level2" number="2.6">
<h2><span class="header-section-number">2.6</span> Quiz</h2>
</div>
<div id="assignment" class="section level2" number="2.7">
<h2><span class="header-section-number">2.7</span> Assignment</h2>

</div>
</div>
<hr>
<center> 
  <div class="footer">
      All illustrations <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY. </a>
      <br>
      All other materials <a href= "https://creativecommons.org/licenses/by/4.0/"> CC-BY </a> unless noted otherwise.
  </div>
</center>
            </section>

          </div>
        </div>
      </div>
<a href="first-week.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="third-week.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
